<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!--
        Note: the LINK tags are used by advanced browsers.
-->
<head>
<title>
No title
</title>



<!--    ......................................................................
    META TAGS (FOR SEARCH ENGINES)
    ......................................................................
-->

  <meta http-equiv="description"
	content="">

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Expires" content="Thu,  8 Nov 2007 09:03:26 GMT">



  <meta name="Generator"
	content="2007-09-09 12:03 Perl program t2html.pl v2007.0526 http://perl-text2html.sourceforge.net/">



<!--    ......................................................................
    BUTTON DEFINITION START
    ......................................................................
-->



    <style type="text/css">



        /*

            ///////////////////////////////////////////////////////////
               NOTE    NOTE    NOTE    NOTE    NOTE    NOTE    NOTE

            This is the default CSS 2.0 generated by the program,
            please see "t2html.pl --help" for option --script-file
            to import your own CSS and Java definitions into the page.

            XHTML note: at page http://www.w3.org/TR/xhtml1/#guidelines
            It is recommended that CSS2 with XHTML use lowercase
            element and attribute names

            This default CSS2 has been validated according to
            http://jigsaw.w3.org/css-validator/validator-uri.html.en

            To design colors, visit:
            http://www.btexact.com/people/rigdence/colours/

               NOTE    NOTE    NOTE    NOTE    NOTE    NOTE    NOTE
            ///////////////////////////////////////////////////////////

            Comments on the CSS tags:

            -   block-width: "thin" (Netscape ok, MSIE nok)

            NETSCAPE 4.05

            -  In general does not render CSS very well. Eg
               font size changes does not show up in screen.
            -  :hover property is not recognised

            NETSCAPE 4.75 as of 2000-10-01

            -  Shows garbage for stylesheet section that marked CITATION.
               (IE has no trouble to show it)

            MSIE 4.0+

            - Renders CSS very well.

            Media types

            - Netscape does not transfer the CSS element definitions to
              the "print" media as it should. They only affect Browser
              or media "screen"
            - That is why you really have to say EM STRONG ... /STRONG EM
              to get that kind of text seen in printer too. You cannot
              just define P.column7 { ... }

            The @media CSS definition is not supported by Netscape 4.05
            I do not know if MSIE 4.0 supports it.

            So doing this would cause CSS to be ignored completely
            (never mind that CSS says the default CSS applies to "visual",
            which means both print and scree types.)

                @media print, screen {  P.code {..}  }

            To work around that, we separate the definitions with

                P.code { .. }               // For screen

                @media print { P.code      // for printer
                {
                    ..
                }}

            And wish that some newer browser will render it right.

        */

        /*   ///////////////////////////////////////////////// HEADINGS */

        h1.default
        {
            font-family: bold x-large Arial,helvetica,Sans-serif;
            padding-top: 10pt;
        }

        h2.default
        {
            font-family: bold large Arial,Helvetica,Sans-serif;
        }

        h3.default
        {
            font-family: bold medium Arial,Helvetica,Sans-serif;
        }

        h4.default
        {
            font-family: medium Arial,Helvetica,Sans-serif;
        }

        /*   ////////////////////////// Make pointing AHREF more visual */

        body
        {
            font-family: "Times New Roman", serif;
            

            /*
                More readable font, Like Arial in MS Word
                The background color is grey

                font-family: "verdana", sans-serif;
                background-color: #dddddd;
                foreground-color: #000000;

                Traditional "Book" and newspaper font
                font-family: "Times New Roman", serif;
            */
        }

        a:link
        {
            font-style: italic;
        }

        /*   A name=... link references */

        a.name
        {
            font-style: normal;
        }

        a:hover
        {
            color:           purple;
            background:      #AFB;
            text-decoration: none;
        }

            /* cancel above italic in TOC and Navigation buttons */

        a.btn:link
        {
            font-style: normal;
        }

            /* each link in TOC */


        a.toc
        {
            font-family: verdana, sans-serif;
            font-style: normal;
        }

        a.toc:link
        {
            font-style: normal;
        }

            /* [toc] heading button which appears in non-frame html */

        a.btn-toc:link
        {
            font-style: normal;
            font-family: verdana, sans-serif;
            /* font-size:  0.7em; */
        }

        /*  //////////////////////////////////// Format the code sections  */

        /*  MSIE ok, Netscape nok: Indent text to same level to the right  */

        blockquote
        {
            margin-right: 2em;
        }

        @media print   { BLOCKQUOTE
        {
            margin-right: 0;
        }}

        samp.code
        {
            color: Navy;
        }

        hr.special
        {
            width: 50%;
            text-align; left;
        }

        pre
        {
            font-family:   "Courier New", monospace;
            font-size:     0.8em;
            margin-top:    1em;
            margin-bottom: 1em;
        }

        pre.code
        {
            color: Navy;
        }

        p.code, p.code1, p.code2
        {
            /*
               margin-top:     0.4em;
               margin-bottom:  0.4em;
               line-height:    0.9em;
            */

            font-family:    "Courier New", monospace;
            font-size:      0.8em;
            color:          Navy;
        }

        /* //////////////////////// tables /////////////////////////// */

        table
        {
            border: none;
            width: 100%;
            cellpadding: 10px;
            cellspacing: 0px;
        }

        table.basic
        {
                font-family:    "Courier New", monospace;
                color: Navy;
        }

        table.dashed
        {

                /* font-family: sans-serif; /*
                /* background:  #F7DE9C; */

                color: Navy;

                border-top:     1px #999999 solid;
                border-left:    1px #999999 solid;
                border-right:   1px #666666 solid;
                border-bottom:  1px #666666 solid;
                border-width:   94%;
                border-style: dashed; /* dotted */


                /* line-height: 105%; */
        }

        table.solid
        {
                font-family:    "Courier New", monospace;
                /* afont-size:      0.8em; */

                color:          Navy;

                /* font-family: sans-serif; /*
                /* background:  #F7DE9C; */

                border-top:     1px #CCCCCC solid;
                border-left:    1px #CCCCCC solid; /* 999999 */
                border-right:   1px #666666 solid;
                border-bottom:  1px #666666 solid; /* dark grey */
                /* line-height: 105%; */
        }

        /* Make 3D styled layout by thickening the boton + right. */

        table.shade-3d
        {
                font-family:    "Courier New", monospace;
                font-size:      0.8em;

                color:          #999999; /* Navy; */

                /* font-family: sans-serif; /*
                /* background:  #F7DE9C; */

                /* border-top:  1px #999999 solid; */
                /* border-left: 1px #999999 solid; */
                border-right:   4px #666666 solid;
                border-bottom:  3px #666666 solid;
                /* line-height: 105%; */
        }

        .shade-3d-attrib
        {
            /*
                F9EDCC          Light Orange
                FAEFD2          Even lighter Orange

                #FFFFCC         Light yellow, lime

            */

            background: #FFFFCC;
        }

        table tr td pre
        {
                /*  Make PRE tables "airy" */
                margin-top:    1em;
                margin-bottom: 1em;
        }

        table.shade-normal
        {
                font-family:    "Courier New", monospace;
                /* font-size:      0.9em; */
                color:          Navy;
        }

        .shade-normal-attrib
        {
            /*  grey: EAEAEA, F0F0F0 FFFFCC
                lime: F7F7DE CCFFCC
                pinkish: E6F1FD D8E9FB C6DEFA FFEEFF (light ... darker)
                slightly darker than F1F1F1: #EFEFEF;
            */
            background: #F1F1F1;
        }

        table.shade-normal2
        {
                font-family:    "Courier New", monospace;
        }

        .shade-normal2-attrib
        {
            background: #E0E0F0;
        }

        .shade-note-attrib
        {
            /*  darker is #E0E0F0; */
            /* background: #E5ECF3; */
            background: #E5ECF3;
            font-family: Georgia, "New Century Schoolbook",
                         Palatino, Verdana, Helvetica, serif;
            font-size: 0.8em;
        }

        /* ..................................... colors ................. */

        .color-white
        {
            color: Navy;
            background: #FFFFFF;
        }

        .color-fg-navy
        {
            color: navy;
        }

        .color-fg-blue
        {
            color: blue;
        }

        .color-fg-teal
        {
            color: teal;
        }

        /*   Nice combination: teal-dark, beige2 and  beige-dark */

        .color-teal-dark
        {
            color: #96EFF2;
        }

        .color-beige
        {
            color: Navy;
            background: #F7F7DE;
        }

        .color-beige2
        {
            color: Navy;
            background: #FAFACA;
        }

        .color-beige3
        {
            color: Navy;
            background: #F5F5E9;
        }

        .color-beige-dark
        {
            color: Navy;
            background: #CFEFBD;
        }

        .color-pink-dark
        {
            background: #E6F1FD;
        }

        .color-pink-medium
        {
            background: #D8E9FB;
        }

        .color-pink
        {
            /*  grey: EAEAEA, F0F0F0 FFFFCC
                lime: F7F7DE CCFFCC
                pinkish: E6F1FD D8E9FB C6DEFA FFEEFF (light ... darker)
            */
            background: #C6DEFA;
        }

        .color-pink-light
        {
            background: #FFEEFF;
        }

        .color-blue-light
        {
            background: #F0F0FF;
        }

        .color-blue-medium
        {
            background: #4A88BE;
        }

        /* ////////////////////////////////////////////// Format columns */

        p.column3
        {
            color: Green;
        }

        p.column5
        {
            color: #87C0FF;   /* shaded casual blue */
        }

        p.column6
        {
            /* #809F69 is Forest green
               But web safe colors are:
               Lighter  ForestGreen: 66CC00
               ForestGreen: #999966 669900 339900 669966

            color: #669900;
            font-family: "Goudy Old Style"
            */
            margin-left: 3em;
            font-family: Georgia, "New Century Schoolbook",
                         Palatino, Verdana, Arial, Helvetica;
            font-size:  0.9em;
        }

            /* This is so called 3rd heading */

        p.column7
        {
            font-style:  italic;
            font-weight: bold;
        }

        @media print { P.column7
        {
            font-style:  italic;
            font-weight: bold;
        }}

        p.column8
        {

        }

        p.column9
        {
            font-weight: bold;
        }

        p.column10
        {
            padding-top: 0;
        }

        em.quote10
        {
            /*
                #FF00FF Fuchsia;
                #0000FF Blue

                #87C0FF casual blue
                #87CAF0

                #A0FFFF Very light blue

                #809F69 = Forest Green , see /usr/lib/X11/rgb.txt

                background-color:

                color: #80871F ; Orange, short of

                # font-family: "Gill Sans", sans-serif;

                line-height: 0.9em;
                font-style:  italic;
                font-size:   0.8em;

                line-height: 0.9em;
                color: #008080;

                background-color: #F5F5F5;
                #809F69; forest green
                #F5F5F5; Pale grey
                #FFf098; pale green
                ##bfefff; #ffefff; LightBlue1

                background-color: #ffefff;

                .................
                #FFFCE7         Orange very light
                #FFE7BF         Orange dark
                #FFFFBF         Orange limon

             */

             /*
             #  See a nice page at
             #  http://www.cs.helsinki.fi/linux/
             #  http://www.cs.helsinki.fi/include/tktl.css
             #
             #  3-4 of these first fonts have almost identical look
             #  Browser will pick the one that is supported
             */

             font-family: lucida, lucida sans unicode, verdana, arial, "Trebuchet MS", helvetica, sans-serif;
             background-color: #eeeeff;
             font-size:   0.8em;
        }

        @media print { em.quote10
        {
            font-style:  italic;
            line-height: 0.9em;
            font-size:   0.8em;
        }}

        p.column11
        {
            font-family: arial, verdana, helvetica, sans-serif;
            font-size: 0.9em;
            font-style: italic;
            color: Fuchsia;
        }

        /* /////////////////////////////////////////////// Format words */

        em.word
        {
            /* #809F69 Forest green */
            color: #80B06A;  /*Darker Forest green */
        }

        strong.word
        {

        }

        samp.word
        {
            color: #4C9CD4;
            font-weight: bold;
            font-family:    "Courier New", monospace;
            font-size:      0.85em;
        }

        span.super
        {
            /* superscripts */
            color: teal;
            vertical-align: super;
            font-family: Verdana, Arial, sans-serif;
            font-size: 0.8em;
        }

        span.word-ref
        {
            color: teal;
        }

        span.word-big
        {
            color: teal;
            font-size: 1.2em;
        }

        span.word-small
        {
            color: #CC66FF;
            font-family: Verdana, Arial, sans-serif;
            font-size: 0.7em;
        }

        /* /////////////////////////////////////////////// Format other */

        /* 7th column starting with double quote */

        span.quote7
        {
            /* color: Green; */
            /* font-style: italic; */
            font-family: Verdana;
            font-weigh: bold;
            font-size: 1em;
        }

        /* This appears in FRAME version: xxx-toc.html */

        div.toc
        {
            font-size: 0.8em;
        }

        /* This appears in picture: the acption text beneath */

        div.picture
        {
            font-style: italic;
        }

        /* This is the document info footer */

        em.footer
        {
            font-size: 0.9em;
        }

    

    </style>


    <!-- ...................................................... Java code -->

    <script type="text/javascript">

        function MakeVisual(obj)
        {
            obj.style.fontWeight = "italic";
        }

        function MakeNormal(obj)
        {
            obj.style.fontWeight = "normal";
        }

        function IgnoreErrors()
        {
            return true;
        }

        window.onerror = IgnoreErrors;

    </script>

        </head>

<body >


<!--    ......................................................................
    TABLE OF CONTENT START
    ......................................................................
-->


<div class="toc" id="toc">
<A name="toc" id="toc" class="name"></A>
<h1>
    Table of Contents
    
</h1>

<a href="#tinypath_el_manage_emacs_startup_dynamically" class="toc">
               Tinypath.el --- Manage Emacs startup dynamically
           </a>
           <br>

<ul>
<li>
           <a href="#preface_feb_1999_how_it_all_begun" class="toc">
               Preface Feb 1999 - How it all begun
           </a>
           <br>
<li>
           <a href="#overview_of_features" class="toc">
               Overview of features
           </a>
           <br>
<li>
           <a href="#how_to_set_up_your_load_path" class="toc">
               How to set up your load path
           </a>
           <br>
<li>
           <a href="#xemacs_and_emacs_specific_directories" class="toc">
               XEmacs and Emacs specific directories
           </a>
           <br>
<li>
           <a href="#finding_loadpath_directories" class="toc">
               Finding load-path directories
           </a>
           <br>
<li>
           <a href="#gnus_and_other_3rd_party_packages" class="toc">
               Gnus and other 3rd party packages
           </a>
           <br>
<li>
           <a href="#updating_new_lisp_packages" class="toc">
               Updating new lisp packages
           </a>
           <br>
<li>
           <a href="#duplicate_files_in_path" class="toc">
               Duplicate files in path
           </a>
           <br>
<li>
           <a href="#symlinked_directories_are_ignored" class="toc">
               Symlinked directories are ignored
           </a>
           <br>
<li>
           <a href="#using_cache" class="toc">
               Using cache
           </a>
           <br>
<li>
           <a href="#cache_file_and_different_emacs_versions" class="toc">
               Cache file and different Emacs versions
           </a>
           <br>
<li>
           <a href="#info_file_support" class="toc">
               Info file support
           </a>
           <br>
<li>
           <a href="#cygwin_support_win32_and_woman_el" class="toc">
               Cygwin support (Win32 and woman.el)
           </a>
           <br>
<li>
           <a href="#faster_emacs_configuration_perl_emacsutil_pl" class="toc">
               Faster Emacs configuration (Perl emacs-util.pl)
           </a>
           <br>
<li>
           <a href="#updating_running_emacs" class="toc">
               Updating running Emacs
           </a>
           <br>
<li>
           <a href="#compressed_lisp_file_support" class="toc">
               Compressed lisp file support
           </a>
           <br>
<li>
           <a href="#trouble_shooting" class="toc">
               Trouble shooting
           </a>
           <br>
<li>
           <a href="#code_note_general" class="toc">
               Code note: General
           </a>
           <br>
<li>
           <a href="#code_note_where_is_that_emacs_package" class="toc">
               Code note: Where is that emacs package
           </a>
           <br>
<li>
           <a href="#code_note_internal_optimizations" class="toc">
               Code note: Internal optimizations
           </a>
           <br>
<li>
           <a href="#code_note_messages" class="toc">
               Code note: *Messages*
           </a>
           <br>
<li>
           <a href="#code_note_custom" class="toc">
               Code note: Custom
           </a>
           <br>
<li>
           <a href="#code_note_insinuating_packages" class="toc">
               Code note: Insinuating packages
           </a>
           <br>
<li>
           <a href="#code_note_elp_profiling_results" class="toc">
               Code note: Elp profiling results
           </a>
           <br>
<li>
           <a href="#todo" class="toc">
               Todo
           </a>
           <br>
</ul>

</div>


<!--    ......................................................................
    TABLE OF CONTENT END
    ......................................................................
-->



<p class="column8">
        Copyright &copy; 1995-2007 Jari Aalto


<p class="column8">
        License: This material may be distributed only subject to
        the terms and conditions set forth in GNU General Public
        License v2 or later; or, at your option, distributed under the
        terms of GNU Free Documentation License version 1.2 or later
        (GNU FDL).

<hr>
               <A name="tinypath_el_manage_emacs_startup_dynamically"  id="tinypath_el_manage_emacs_startup_dynamically"></A>
               <h1>
               Tinypath.el --- Manage Emacs startup dynamically
               
               </h1>



  <a name="preface_feb_1999_how_it_all_begun" id="preface_feb_1999_how_it_all_begun"></a>
  <h2>
      Preface Feb 1999 - How it all begun
      
  </h2>




<p>
<p class="column8">
        When you have set up your Emacs installation to your liking, a day
        comes when you decide that it's time to seriously reconsider the
        directory structure of your installed lisp packages. At start, it
        is customary to use simple file hierarchy where all private
        packages are installed under:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      ~/elisp   ;; some people also prefer ~/lisp    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        Complete kits are usually installed directly under the root:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      ~/elisp/packages/bbdb-2.00.06/
      ~/elisp/packages/psgml-1.0.3/
      ~/elisp/packages/pcl-cvs-2.9.2/    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        A more sophisticated way is to use symlinks to the latest
        versions, so that you don't have to change <samp class="word">load-path</samp> every
        time you install a new version. It is only matter of updating
        the symlink:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      ~/elisp/packages/pcl-cvs/  --&gt; ~/elisp/packages/pcl-cvs-2.9.2/
      |
      This path is in the `load-path'    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        In networked, where Windows ic oupled with Unix workstations via SAMBA,
        you may have mapped the <strong class="word">H:</strong> disk to you Unix <strong class="word">$HOME</strong>:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      H:  --&gt; Unix $HOME  \\SERVER\DIRECTORY\YOUR-LOGIN-DIR    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        Now, there is a catch when you use Unix symlinks in <samp class="word">$HOME/elisp</samp>
        and try to access the directories from Windows. Having set PC's
        HOME environment variable to point to H:, Emacs can start reading
        Unix <samp class="word">$HOME/.emacs</samp> startup file, but you soon see simple
        error messages like &quot;Can't load library xxx&quot;, which soon follow by
        bigger concerns: &quot;autoloading xxx failed&quot;. The problem is the
        mounted H: disk. You see, PC's network mount can't distinguish
        symlinked directories from real directories, so all symlinked Unix
        directories in <samp class="word">load-path</samp> are dead. And that's why most of the
        files cannot be found any more.


<p class="column7"><em><strong>
       The conclusions</strong></em>



<p class="column8">
        For cross platform solution it is best not to rely on symlinks,
        because they don't work over a Windows mount. Secondly,
        updating <samp class="word">load-path</samp> should not be needed by hand after a new
        package installation, after a directory name change, after
        directory structure change, etc. A dream package would solve this
        all and do the hard work: &quot;There, that is the root(s) of all Emacs
        lisp, go and sniff all the directories and update <samp class="word">load-path</samp>&quot;


<p class="column8">
        That was what this package originally was all about. Nowadays it
        does a little more than that. Your <samp class="word">load-path</samp> is updated
        automatically without any manual work. You only have to give the
        start ROOT path(s) of your installed lisp hierarchies in the file
        system. This package is highly effective: scanning thousands of
        files in a matter of seconds and once the cache has been created,
        it takes only a snap to load it in next sessions. All <samp class="word">require</samp> and
        <samp class="word">load</samp> commands execute also faster than previously, because the
        information about existing files is immediately available. The
        speedup is helped through advised functions.



  <a name="overview_of_features" id="overview_of_features"></a>
  <h2>
      Overview of features
      
  </h2>




<p>
<p class="column7"><em><strong>
       Automatic load-path configuration</strong></em>


<ul>
	<li>Define list of <samp class="word">root</samp> directories of your Emacs lisp and this
            package will recursively add directories which contain .el or
            .elc files to <samp class="word">load-path</samp>
<li>A cache is utilized to remember previous scan and
            expired periodically. Using cache speeds up loading files
            considerably if you have many directories. The number of lisp
            directories doesn't affect the load performance any more.
            This is accomplished by using extra advice code in functions:
            <samp class="word">load</samp>, <samp class="word">load-library</samp>, <samp class="word">require</samp>, <samp class="word">locate-library</samp> and
            <samp class="word">autoload</samp>.
	</li>
<li>When Emacs becomes idle (some 15 minutes of idle time) the
            cache and <samp class="word">load-path</samp> is validated for erroneous entries and
            rebuilt as needed. This feature should auto-detect changes in
            directory structure automatically and help semi auto-installing
            new directories (packages) for you.
	</li>
<li>The <samp class="word">load-path</samp> is optimized so, that users' files automatically
            take precedence first (~/elisp), next any other files found,
            and last the core Emacs files in the distribution.
            For example in previous Emacs versions, shipped
            speedbar.el used to be too outdated if used with JDE
            package. It had to be manually updated from the
            development site. That us the reason why core Emacs paths
	            are at the then of <samp class="word">load-path</samp>.</li>
</ul>




<p class="column7"><em><strong>
       Automatic Info-default-directory-list configuration</strong></em>


<ul>
	<li>If you download packages that include Emacs info files,
            the <samp class="word">Info-default-directory-list</samp> is updated at the same time
            as the <samp class="word">load-path</samp>, when root directories are examined.
<li>No more manual updating of info files. The missing
            <samp class="word">dir</samp> entry is created or updated as needed.
	</li>
<li>You can update all <strong class="word">new</strong> info files in your system by calling
	            M-x <samp class="word">tinypath-info-scan-Info-default-directory-list</samp></li>
</ul>




<p class="column8">
        If you have added new info files by hand, just call function
        <samp class="word">tinypath-info-handler</samp> to update your Emacs and update the
        <samp class="word">dir</samp> entry. After that reset infor with <samp class="word">M-x</samp>
        <samp class="word">tinypath-info-initialize</samp>


<p class="column7"><em><strong>
       Win32 automatic manpath configuration</strong></em>


<ul>
	<li>In Unix systems the MANPATH enavironment variable contains
            directories where to find manual pages, but in Win32,
            there is no default MANPATH and <samp class="word">M-x</samp> <samp class="word">man</samp> does not work.
<li>If package <em class="word">woman.el</em> (Included in latest Emacs
            versions) is along <samp class="word">load-path</samp>, it is automatically
            configured to support to read manual pages. It replaces
	            the <samp class="word">M-x</samp> <samp class="word">man</samp> command.</li>
</ul>




<p class="column7"><em><strong>
       Win32 Cygwin environment support</strong></em>


<ul>
	<li>If <em class="word">cygwin1.dll</em> (&lt;<a href="http://www.cygwin.com/" >http://www.cygwin.com/</A>&gt;) is in your path,
            automatic detection tries to find the Cygwin root and scan
            manual and info pages for use with <em class="word">woman.el</em>
            <strong class="word">Note:</strong> This feature s for native Win32 Emacs. Nowadays,
            there is also native Cygwin Emacs, which behaves just like
	            the big brother *nix Emacs.</li>
</ul>




<p class="column7"><em><strong>
       Compressed lisp file support</strong></em>


<ul>
	<li>Overloads commands load, load-library, load-file, require
            and autoload to accept <samp class="word">jka-compr</samp> compressed lisp .el files.
<li>Primarily meant to be used in low quota accounts.
	</li>
<li>Compress or decompress lisp files. You don't have to change
            a thing in your Emacs startup file, all will work as usual.
	</li>
<li>Correctly handles aliased commands that turn out to be
	            in <samp class="word">autoload</samp> state.</li>
</ul>





  <a name="how_to_set_up_your_load_path" id="how_to_set_up_your_load_path"></a>
  <h2>
      How to set up your load path
      
  </h2>




<p>
<p class="column8">
        The <samp class="word">tinypath-:load-hook</samp> contains function <samp class="word">tinypath-setup</samp> which
        starts examining all directories under <samp class="word">load-path</samp> and
        <samp class="word">tinypath-:load-path-root</samp> which is set to reasonable defaults of
        site wide and personal installations. If you keep all your lisp
        files under <em class="word">$HOME/elisp</em>, then you do not need to configure anything
        for this package to work. Your <samp class="word">load-path</samp> has been updated after
        this statement at the beginning of your <em class="word">$HOME/.emacs</em>

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      (load &quot;~/elisp/tiny/tinypath&quot;) ;; Or anywhere you have it installed    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        If you have <strong class="word">many</strong> separate Emacs lisp root directories, like one
        for <em class="word">site-lisp</em> and one for <em class="word">site-packages</em> and one for your
        <em class="word">personal</em> <em class="word">lisp</em> files, then you have add those to variable
        <samp class="word">tinypath-:load-path-root</samp>. Below there is an example for PC users,
        where the E: partition replicates identical Unix tree structure.
        We suppose for the moment that Cygwin is installed there.
        The following actually works for Unix too, because non-existing
        directories will be ignored:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      (setq tinypath-:load-path-root
        '(&quot;~/elisp&quot;  &quot;E:/usr/local/share/emacs/site-lisp/common&quot;))
      (load &quot;~/elisp/tiny/tinypath&quot;)    </PRE></TD>
    </TR>
</TABLE>



  <a name="xemacs_and_emacs_specific_directories" id="xemacs_and_emacs_specific_directories"></a>
  <h2>
      XEmacs and Emacs specific directories
      
  </h2>




<p>
<p class="column8">
        In spite of great effort from developers to make packages
        compatible for both Emacs platforms, there is always some packages
        that only works with Emacs or XEmacs. It is assumed that the site
        admin has created directories like these to keep the <em class="word">site-lisp</em>
        installation clean:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      ;;   This might be also under /opt/share/site-lisp
      ;;   Refer to file hierarchy standard at
      ;;   <a href="http://www.pathname.com/fhs/" >http://www.pathname.com/fhs/</a>

      /usr/share/emacs/site-lisp/common/   .. XEmacs and Emacs
      /usr/share/emacs/site-lisp/emacs/    .. only for Emacs
      /usr/share/emacs/site-lisp/xemacs/   .. only for XEmacs    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        To take care of the Emacs specific <samp class="word">load-path</samp> setting, use code
        similar to this snippet. If you load the setup multiple times, the
        <samp class="word">pushnew</samp> ensures that the directories are not added multiple
        times.

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      (require 'cl)
      (dolist (path (&quot;~/elisp&quot;
                     &quot;/usr/share/emacs/site-lisp/common&quot;
                     ;;  Select Emacs or XEmacs specific installations
                     (if (boundp 'xemacs-logo)
                         &quot;/usr/share/site-lisp/xemacs&quot;
                       &quot;/usr/share/site-lisp/emacs&quot;)))
        (when (stringp path)
          (pushnew path tinypath-:load-path-root :test 'string=)))

      ;; PLEASE COPY VERBATIM. THERE ARE OPTIMIZATIONS
      ;; THAT ACTIVATE If YOU ADD THE PATH
      (pushnew &quot;~/elisp/tiny/lisp&quot; load-path :test 'stringp=)
      (load &quot;tinypath.el&quot;)    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        In fact this package will check current emacs version and make
        sure that only correct directories are included to the
        <samp class="word">load-path</samp>. If you simply instructed to search the whole
        site-lisp root <samp class="word">/usr/local/share/site-lisp</samp>, and current emacs
        binary is &quot;emacs&quot;, then all directories that contain path
        portion <samp class="word">/xemacs</samp>  woudl have been automatically ignored.


<p class="column7"><em><strong>
       Building part of site-lisp using Net</strong></em>



<p class="column8">
        If we continue talking a bit more about site-lisp, there is utility
        <em class="word">mywebget.pl</em> at &lt;<a href="http://perl-webget.sourceforge.net/" >http://perl-webget.sourceforge.net/</A>&gt;. It
        includes a <em class="word">mywebget-emacs.conf</em> which contains
        knowledge where the various lisp developers' home pages are and how
        to download all known lisp tools that does not come with Emacs. If
        you have lot of disk space and you're interested in getting more
        lisp tools to go with your Emacs, follow the instruction laid out
        in this mywebget.pl's project page.


<p class="column8">
        If you are further interested in Emacs packages, see CVS
        version control program available for Unix at
        &lt;<a href="http://www.cvshome.com/" >http://www.cvshome.com/</A>&gt; and for Win32 <samp class="word">cvs</samp> will ship with
        the &lt;<a href="http://cygwin.com" >http://cygwin.com</A>&gt; installation. With CVS you can track
        development of many Emacs projects including Gnus, BBDB,
        Mailcrypt etc.  Cvs is minimizing network traffic by
        transferring only changes.  Here is one suggestion where you
        could put all your Emacs Lisp Version control downloads:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
       /usr/share/emacs/site-lisp/net/cvs-packages    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        Now, the overall structure of whole site-lisp looks something like
        this:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
               ROOT/  ( /usr/share/emacs or equivalent )
               |
               +--site-lisp/
                  |
                  +--emacs/
                  |  |  ...Eamcs only files
                  |  +--packages/
                  |  |  +--pcl-cvs-2.9.9/
                  |  |  +-... and so on
                  |  +--win32/
                  |     +--gnuserv/
                  |     +-... and so on
                  +--net/
                  |  +--users/
                  |     +-LispDeveloperA
                  |     +-LispDeveloperB
                  |     +-... and so on
                  |  +--cvs-packages/
                  |     +--liece/
                  |     +--lookup/
                  |     +--ILISP/
                  |     +--jess-mode/
                  |     +--devel/
                  |     +--emacro/
                  |     +--tnt/
                  |     +--cc-mode/
                  |     +--mailcrypt/
                  |     +--bbdb/
                  |     +--gnus/
                  |     +-... and so on
                  +--common/
                  |     ...COMMON for both Emacs and XEmacs
                  |     =======================================
                  |     ...Packages that you find posted to the
                  |     ...gnu.emacs.sources and whose author's
                  |     ...do not have a homepage
                  +--xemacs/
                     |  ...XEamcs only files
                     +--cvs-packages/
                        +--xemacs-packages/    </PRE></TD>
    </TR>
</TABLE>


<p class="column7"><em><strong>
       XEmacs 21.2+ core packages</strong></em>



<p class="column8">
        The latest XEmacs versions ship with only the very basic
        installation. Lisp packages are distributed in separate archive
        <em class="word">xemacs-packages</em> (nick named SUMO due to its huge size). There is
        also <em class="word">mule-packages</em> and <em class="word">site-packages</em> archives. A built-in
        heuristics tries to guess the location of these by looking under and
        near your XEmacs installation:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      .../XEmacs/XEmacs-NN.N/xemacs-packages
      .../XEmacs/xemacs-packages    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        If the archives have been installed elsewhere, you have to tell the
        location by defining following variable prior loading TinyPath. You
        can't put these to <samp class="word">tinypath-:load-path-root</samp> because this is
        special information that needs to present during the very initial
        boot-up to find crucial packages like <em class="word">jka-compr.el</em>.

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      (setq tinypath-:core-emacs-load-path-list
            '(&quot;/usr/share/site-lisp/xemacs/xemacs-packages&quot;
              &quot;/usr/share/site-lisp/xemacs/mule-packages&quot;
              &quot;/usr/share/site-lisp/xemacs/site-packages&quot;))    </PRE></TD>
    </TR>
</TABLE>



  <a name="finding_loadpath_directories" id="finding_loadpath_directories"></a>
  <h2>
      Finding load-path directories
      
  </h2>




<p>
<p class="column8">
        If you only used default <em class="word">$HOME/elisp</em> directory for your files, the
        <samp class="word">tinypath-:load-path-function</samp> starts recursively searching all
        the directories under the root(s) <samp class="word">tinypath-:load-path-root</samp>. Not all
        directories are counted in when the search descends below the root(s).
        Variable <samp class="word">tinypath-:load-path-ignore-regexp</samp> decides if the directory
        should be ignored. By default:

<ul>
	<li>Package's additional subdirectories like texinfo, tex, doc, etc,
            misc, RCS, CVS, .svn (Subversion), MT (monotone version control),
            zip are ignored.
<li>Any temporary directories named .../t/ .../T/ .../tmp* .../temp*
            are ignored.
	</li>
<li>Directories that do not contain any files ending to .el or .elc are
	            ignored.</li>
</ul>





  <a name="gnus_and_other_3rd_party_packages" id="gnus_and_other_3rd_party_packages"></a>
  <h2>
      Gnus and other 3rd party packages
      
  </h2>




<p>
<p class="column8">
        <strong class="word">Note:</strong> In latest version of this utility <em class="word">Gnus</em> is treated
        specially. All Gnus versions are detected along load-path and
        the very latest Gnus version is installed to your
        <samp class="word">load-path</samp>. This is based on the knowledge in the
        <samp class="word">gnus-version</samp> variable and the heuristics will pick the
        newest for you. You actually do not have to do anything else,
        but to drop latest Gnus somewhere, to be able to use it
        immediately.


<p class="column9"><strong>
         Under the hood - What follows, is old documentation.</strong>



<p class="column8">
        It is important to understand how this package works: It caches
        every possible lisp directory it can find. Now, if you have
        installed private copy of Gnus, say in <samp class="word">~/elisp/cvs-packages/gnus</samp>,
        there is a problem, because Emacs distribution also includes Gnus.
        There is NO WAY TO TELL OR CHANGE path order when the cache is in
        use. This is a design decision and cannot be changed. The old trick,
        where a new directory was added in front of <samp class="word">load-path</samp>, will not
        work because everything goes through cache. What you need to do
        instead, is to tell that the &quot;other&quot; Gnus should be ignored during
        cache creation, so that it is completely unknown.


<p class="column7"><em><strong>
       Solution: ignoring directories</strong></em>



<p class="column8">
        There is very simple way. Put your regular expression to
        <samp class="word">tinypath-:ignore-file-regexp-extra</samp> and it will tell which
        directories to ignore.  Naturally you must put the lisp code
        <strong class="word">before</strong> you load package.

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      (setq tinypath-:load-path-ignore-regexp-extra
            &quot;\\|[/\\]x?emacs[/\\0-9.]+[/\\]lisp[/\\]gnus&quot;)
      ;; PLEASE COPY VERBATIM. THERE ARE OPTIMIZATIONS
      ;; THAT ACTIVATE If YOU ADD THE PATH
      (require 'cl)
      (pushnew &quot;~/elisp/tiny/lisp&quot; load-path :test 'stringp=)
      (load &quot;tinypath.el&quot;)    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        <span class="word-ref">[For advanced Lisp programmers]</span> You can add ignored gnus directory
        to <samp class="word">tinypath-:load-path-ignore-regexp</samp> via
        <samp class="word">tinypath-:load-path-ignore-regexp-hook</samp>. When the hook is run, the
        default value for <samp class="word">tinypath-:load-path-ignore-regexp</samp> is already
        available. In hook, append regular expression that excludes the
        Gnus directory. Here is an example; make sure that you don't add
        the regexp multiple times. The multiple invocations is protected by
        setting a plist property and checking it. The ugly [\\/] makes the
        regexp compatible with both Unix and win32 paths. System
        directories in Unix are typically /emacs/NN.NN/ and in win32
        /emacs-NN.NN/, that's why added &quot;-&quot;.

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      (add-hook 'tinypath-:load-path-ignore-regexp-hook
                'my-tinypath-:load-path-ignore-regexp-hook)

      (defun my-tinypath-:load-path-ignore-regexp-hook ()
        ;;  Do this only once
        (unless (get 'my-tinypath-:load-path-ignore-regexp-hook 'set)
          ;; mark as done.
          (put 'my-tinypath-:load-path-ignore-regexp-hook 'set t)
          (setq tinypath-:load-path-ignore-regexp
                (concat
                 tinypath-:load-path-ignore-regexp
                 &quot;[/\\]x?emacs[/\\0-9.]+[/\\]lisp[/\\]gnus&quot;))))    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        #todo: What about XEmacs public/private Gnus installations?



  <a name="updating_new_lisp_packages" id="updating_new_lisp_packages"></a>
  <h2>
      Updating new lisp packages
      
  </h2>




<p>
<p class="column8">
        Suppose you have installed a new version of a package:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      ~/elisp/gnus/pgnus-0.74/
      ~/elisp/gnus/pgnus-0.95/    ;; NEW    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        Both these directories end up being added to the <samp class="word">load-path</samp>,
        but that is not preferable. It is the latest version that
        should be in the <samp class="word">load-path</samp>. The solution is to move the old
        versions under some name that will be ignored by default. It
        is recommended that a backup of previous packages are renamed
        to start with a word &quot;tmp-&quot;. All directories that start with
        prefix <em class="word">tmp</em> are ignored.

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      % mv ~/elisp/gnus/pgnus-0.74/ ~/elisp/gnus/tmp-pgnus-0.74/
                                                 ====    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        However if you update package in a site-lisp directory, there
        may be a distant problem that somebody needs older version of
        the package. If you made the backup like above, that user
        cannot load the old package any more, because it doesn't show
        up in <samp class="word">load-path</samp>


<p class="column8">
        There is no easy answer to keep old packages. Admin could
        announce that: &quot;new version has been installed in DIR, the old
        one is in TMP-OLD-DIR&quot; and have users manually arrange their
        <samp class="word">load-path</samp> if needed. Following lisp command would solve
        their setup. The statement below adds the old directory to the
        <em class="word">beginning</em> of <samp class="word">load-path</samp> and thus load commands would find the
        old version of the package first.

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      (load &quot;~/elisp/tiny/tinypath&quot;)
      (pushnew &quot;TMP-OLD-OLD-DIR&quot; load-path :test 'string=)
      (tinypath-cache-regenerate)    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        Remember to mention to users that they need to update cache with
        <samp class="word">tinypath-cache-regenerate</samp> (called with prefix argument) to see
        the changes.



  <a name="duplicate_files_in_path" id="duplicate_files_in_path"></a>
  <h2>
      Duplicate files in path
      
  </h2>




<p>
<p class="column8">
        If you have accustomed to putting your path to specific order, you
        have to rethink your strategy if you are going to use this package.
        The philosophy behind creating this utility was: YOU SHOULD NOT
        NEED TO DO MANUAL WORK TO UPDATE PATHS. This means that the order of
        the paths <em class="word">must</em> not be significant. Now, you may face a situation
        where you install a library or package that contains a file, which
        has already been installed to your hierarchy. Take for example,
        <em class="word">smtpmail.el</em>:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      /usr/bin/emacs-20.4/lisp/mail/smtpmail.el
      /usr/share/site-lisp/common/packages/semi/flim-1.12.1/smtpmail.el    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        We have a problem here if FLIM's <em class="word">smtpmail.el</em> is not compatible with
        the one in Emacs. If it is, then there is no problem. Either one can be
        loaded, and the <samp class="word">load-path</samp> order does not matter. But you don't
        know that before you get error &quot;function smtpmail-xxxx not defined&quot;
        and you start investigating with (locate-library &quot;smtpmail&quot;) which
        package is actually active.


<p class="column8">
        Acer activating this package, please investigate your path
        with <span class="word-ref">[C-u]</span> <samp class="word">M-x</samp> <samp class="word">tinypath-cache-problem-report</samp> and see if you
        find duplicate entries. Investigate each one and possibly move
        the file to another name or remove older ones. E.g. in the above
        situation, the cure might be moving FLIM's <em class="word">smtpmail.el</em> under name
        <em class="word">flim-smtpmail.el</em> so that it doesn't get loaded with (require
        'smtpmail). The best is to contact the maintainer(s) and tell them
        about conflicts. Here is a sample of one generated problem report:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      imenu.el
        323 34073 1998-05-07 16:28:08 /usr/share/site-lisp/common/other/
        910 37169 1999-12-04 02:47:58 /usr/share/site-lisp/common/programming/java/jde/jde-2.1.6beta13/lisp/
        1350 38663 1999-11-28 01:14:38 /usr/bin/emacs/gnu-emacs/emacs-20.4.1/lisp/
      base64.el
        515  9943 1999-12-11 19:15:20 /usr/share/site-lisp/common/packages/gnus-5.8.2/lisp/
        807  9892 1999-11-15 00:00:12 /usr/share/site-lisp/common/packages/w3-4.0pre.46/lisp/    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        <strong class="word">Explanation:</strong> User had used <em class="word">imenu</em> as a separate package
        since early Emacs versions in &quot;other&quot; directory. Now the
        latest Emacs ships one, so it is best to delete the previous
        one <samp class="word">other/imenu.el.</samp> Keep on eye on the numbers here: The
        lower, the more close it is to the beginning of cache when the
        directories were searched. The package with lowest score will
        get loaded. Another package, <em class="word">base64.el</em> seems to be
        problematic too. But because Gnus path has lowest score, it
        will get loaded before w3's base64.el. This is good, because
        Gnus contains the latest version of <em class="word">base64.el</em>. In the buffer
        <samp class="word">tinypath-report-mode</samp> is turned on to manipulate reported
        lines.  Unnecessary files can be deleted with
        <samp class="word">Control-shift-mouse-1</samp> or <samp class="word">C-c</samp> <samp class="word">C-d</samp>.



  <a name="symlinked_directories_are_ignored" id="symlinked_directories_are_ignored"></a>
  <h2>
      Symlinked directories are ignored
      
  </h2>




<p>
<p class="column8">
        It has been the tradition to use symlinks a lot in Unix to
        arrange easy access to versioned packages. Like how to
        ~/elisp/gnus/ no matter what version is currently installed.

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      ln -s ~/elisp/packages/gnus-N.NN  ~/elisp/packages/gnus    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        This package however <em class="word">skips</em> those symlinks and records the
        absolute path name to the <samp class="word">load-path</samp>. There are couple of points:
        a) it is more instructive to peek the <samp class="word">load-path</samp> to actually see
        what versions have been installed to the Emacs b) The symlinks are
        error prone since there may be several symlinks that lead to same
        directory and c) symlinks don'e work in heterogenous environments
        where Win32 and Linux and Unix is networked together. To migrate to
        this package you need to examine your symlinks and remove them.


<p class="column8">
        If you have drawn a symlink to the the current directory from
        <em class="word">SEPARATE</em> directory, then that directory will never be seen:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      ln -s ~/some-disk/elisp/artist-1.1/ ~/elisp/packages/artist-1.1    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        To solve this, instead either <strong class="word">a)</strong> move the package physically
        under the ~/elisp/ from the <em class="word">~/some-disk/elisp/</em> so that the
        recursive search will record it or <strong class="word">b)</strong> add the separate
        directory <em class="word">~/some-disk/elisp</em> to the variable
        <samp class="word">tinypath-:load-path-root</samp>.



  <a name="using_cache" id="using_cache"></a>
  <h2>
      Using cache
      
  </h2>




<p>
<p class="column8">
        Now when you're freed from update burden of the directories in your
        disk, you can concentrate organizing the files under sensible
        directories. Here is an example how the organizing could go:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      ~/elisp/users/kevinr/       Kevin Rodger's files
      ~/elisp/users/ilya/         Ilya Zakharevich's files
      ..
      ~/elisp/packages/bbdb-2.00.06/  Version-ed packages
      ~/elisp/packages/psgml-1.0.3/
      ~/elisp/packages/pcl-cvs-2.9.2/
      ~/elisp/packages/tiny-19990215/
      ...
      ~/elisp/other/              All single add-on packages    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        All these paths in <samp class="word">load-path</samp> and you can imagine how slow a
        standard Emacs would become: it takes even more time to find some
        package xxx, when Emacs sees a call (require 'xxx), because Emacs
        must start looking into every single directory under <samp class="word">load-path</samp>
        until it can determine if it can or cannot load the asked package.
        This utility will store all lisp files in cache, and it is
        activated by default. The variable <samp class="word">tinypath-:cache-expiry-days</samp>
        controls the interval when it is concluded that a new tree
        recursion is needed. If you install new packages during those
        non-expiry days, it is best to call <samp class="word">C-u</samp> <samp class="word">M-x</samp>
        <samp class="word">tinypath-cache-regenerate</samp> to build up to date image of your files
        and <samp class="word">load-path</samp> directories.


<p class="column10"><em class="quote10">
          If you want one short advice: always call <samp class="word">tinypath-cache-regenerate</samp>
          after any lisp file or directory update.</em>




  <a name="cache_file_and_different_emacs_versions" id="cache_file_and_different_emacs_versions"></a>
  <h2>
      Cache file and different Emacs versions
      
  </h2>




<p>
<p class="column8">
        It is important that each Emacs loads correct cache file. The cache
        file's name is derived from the emacs version and emacs type, which
        can be &quot;xemacs&quot;, &quot;win32-xemacs&quot;, &quot;emacs&quot; or &quot;win32-emacs&quot;.

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
        tinypath-:cache-file-prefix
      + EMACS-TYPE
      + HOST
      + EMACS-VERSION
      + tinypath-:cache-file-postfix

      ~/elisp/config/emacs-config-tinypath-cache-win32-HOST-emacs-20.4.1.el.gz
      ==========================================                        ======
      prefix                                                           postfix    </PRE></TD>
    </TR>
</TABLE>


<p class="column7"><em><strong>
       Unix hosts and NFS mounts</strong></em>



<p class="column8">
        In Unix environment, it is also common that several hosts are NFS
        mounted so that your home disk is available from every server. The
        available programs are not usually NFS mounted, but programs are
        stored locally on each server's own disk. Now, there would be a
        problem if you logged to host <em class="word">A</em> and started tinypath.el which had
        made cache in on host <em class="word">B</em>, because <em class="word">A</em> does not have the same
        directories as <em class="word">B</em> did (site-lisp). This has been taken care of by
        including <strong class="word">hostname</strong> part in the cache file name. For each host, a
        separate cache file is created. Now, suppose all the Unix hosts are
        same brand, say Sun OS, Linux, or HP-UX and a good administrator has
        separated the programs and the data in their own directory
        structures. Furthermore, these structures are NFS mounted and thus
        visible to the remote machines. In this scenario, it would not
        really matter to which host you log into, because you would always
        see the same programs and site-lisp directories and there would not
        be need for host specific cache files. In that case, disable the
        <em class="word">HOST</em> word by setting this variable to nil:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      (setq tinypath-:cache-file-hostname-function nil)    </PRE></TD>
    </TR>
</TABLE>



  <a name="info_file_support" id="info_file_support"></a>
  <h2>
      Info file support
      
  </h2>




<p>
<p class="column8">
        In addition to updating the <samp class="word">load-path</samp>, the recursive function
        has a chance to search for installed info files as well. When you
        keep all your site lisp under one directory, it is not uncommon
        that the bigger packages include documentation files in info format
        as well. Like:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      /usr/share/site-lisp/emacs/pcl-cvs-2.9.9/
      /usr/share/site-lisp/common/packages/psgml-1.2.1/    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        One possibility is that after you download and uncompress a
        package, you copy the info file to some central directory
        where you keep all you info files. This is lot of manual work.
        (Never mind that in Unix you might use Makefile to install
        everything, in Win32 it's all manual work). This package does the
        same job by looking for directories that either have info files or
        a central info repository called <samp class="word">dir</samp>. If the <samp class="word">dir</samp> file
        has all the info files up to date, nothing is done. In other cases:

<ul>
	<li>If the central <samp class="word">dir</samp> in the directory does not exits,
            it is created.
<li>If <samp class="word">dir</samp> does not contain entry for info file, it is added.
	            The entry name is derived from the filename.</li>
</ul>




<p class="column8">
        The <samp class="word">Info-default-directory-list</samp> is updated to include any new
        directory locations and they are saved to same cache file. When you
        call <samp class="word">C-h</samp> <samp class="word">i</samp> you will see the new info entries. Easy and
        maintenance friendly. No need to worry about supplied info files any
        more, they are automatically integrated to your Emacs. If you have
        installed any new packages to your system, Emacs packages or Unix
        packages that installed something with &quot;install -c&quot;, it is best to
        update your info files with <samp class="word">M-x</samp>
        <samp class="word">tinypath-info-scan-Info-default-directory-list</samp>. This is also
        called if you call: <samp class="word">C-u</samp> <samp class="word">M-x</samp> <samp class="word">tinypath-cache-regenerate</samp>



  <a name="cygwin_support_win32_and_woman_el" id="cygwin_support_win32_and_woman_el"></a>
  <h2>
      Cygwin support (Win32 and woman.el)
      
  </h2>




<p>
<p class="column8">
        It is common that Emacs in Win32 environment is coupled with
        &lt;<a href="http://www.cygwin.com" >http://www.cygwin.com</A>&gt; toolkit which contains all the manual pages
        for the unix commands and possibly new info pages. This package
        will locate <samp class="word">cygwin1.dll</samp> file along PATH and recurse whole cygwin
        installation root to find new entries that can be used inside
        Emacs. In theory this all should happen automatically and the only
        thing you have to do is to ensure that you have proper PATH
        settings at your OS level before this package is started. If Cygwin
        /bin directory in in PATH, <samp class="word">tinypath-:extra-path-root</samp> will get set
        to a correct value at boot time.


<p class="column8">
        If you have more places where you keep Unix tools which contain
        more manual or info pages, like Reed Kotler (old Unix-like env)
        <a href="http://www.reedkotler.com/" >http://www.reedkotler.com/</A> you <strong class="word">must</strong> manually set variable
        <samp class="word">tinypath-:extra-path-root</samp> to the list of search root directories.
        If you set this yourself, you <strong class="word">must</strong> also include the cygwin
        installation root directory

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      (setq tinypath-:extra-path-root
            '(&quot;e:/unix-root/cygwin&quot;
              &quot;e:/unix-root/reed-kotler&quot;
              ...))    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        Package <em class="word">woman.el</em> will be configured automatically if it is along
        <samp class="word">load-path</samp> to handle manual page viewing with command <samp class="word">M-x</samp>
        <samp class="word">man</samp>. Please make sure that you do not destroy the pre-defined
        <samp class="word">woman-manpath</samp> in your Emacs startup files with lisp commands or
        the efforts to find out new manual pages are thrown off the window.
        Search you startup files for anything that looks like <samp class="word">setq</samp>,
        <samp class="word">defvar</samp>, <samp class="word">defconst</samp>: (setq woman-manpath ... and change the code
        to <strong class="word">add</strong> to the variable instead:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      (require 'cl)
      (dolist (path '(&quot;one&quot; &quot;two&quot; &quot;three&quot;))
        (pushnew (expand-file-name path) woman-manpath :test 'string))    </PRE></TD>
    </TR>
</TABLE>



  <a name="faster_emacs_configuration_perl_emacsutil_pl" id="faster_emacs_configuration_perl_emacsutil_pl"></a>
  <h2>
      Faster Emacs configuration (Perl emacs-util.pl)
      
  </h2>




<p>
<p class="column8">
        Indication of this feature at startup is following message, where
        EXT refers to externally launched process which must be waited
        until further processing is done.

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      TinyPath: EXT Process running ... [may take a while]    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        As this package evolved and more support was added to various
        environments, like Cygwin, which requires traversing hundred of
        directories to find out if they contained info or manual pages,
        it came evident that Emacs Lisp method was too slow. An alternative
        method was developed using Perl language and written in <em class="word">emacs-util.pl</em>
        which can traverse directory hierarchies to find relevant
        directories for the setup. This interface is automatically used
        if two conditions are met in current environment:

<ul>
	<li>Binary <em class="word">perl</em> must be along PATH. (according  <samp class="word">executable-find</samp>)
<li>perl script <em class="word">emacs-util.pl</em> must be along PATH. Either copy
            the file to suitable place or include Tiny Tool's <samp class="word">/bin</samp>
            directory to your PATH (This is not the whole story, see
	            &quot;Internal optimizations&quot;).</li>
</ul>




<p class="column8">
        If all goes well, a <samp class="word">call-process</samp> to the utility script will
        return the file hierarchies much faster than the Emacs Lisp ever
        could. The difference is that you don't see the traversing progress
        as you would if Emacs Lisp did the same thing. The command line
        arguments passed to the utility scripts can be found from the
        <em class="word">Message</em> buffer and you can run the program yourself if you think
        that it returns incorrect listing. Print the script help with
        following command:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      % perl emacs-util.pl --help    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        Here are some performance statistics of the perl script in action.
        (Use --verbose argument to see the statistics)

<ul>
	<li>Intel 400MHz, IBM GXP 80G IDE disk, whole Cygwin installation
            scan: 3 min 46 sec, dirs: 2373, files: 35 271
<li>Same PC, but this time site-lisp directory, subset of Cygwin
            hierarchy at /usr/share/site-lisp took:
	            0 min 13 sec, dirs: 648, files: 8750</li>
</ul>




<p class="column8">
        Let's consider one scenario that you may encounter if you intend to
        use Cygwin similarly as the big brother Linux. Let's suppose that
        you have dedicated a disk portion where you intend to duplicate
        whole Linux-like directory hierarchy. You have ROOT under which you
        keep all the files, including anything that is Cygwin-related.

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      E:/usr/share/site-lisp Emacs lisp as outlined earlier
      E:/usr/share/site-perl Perl packages and scripts
      E:/usr/share/site-php  PHP code
      E:/usr/share/site-cvs  Various other external CVS C-packages    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        The default heuristics <samp class="word">ti::win32-cygwin-p</samp> should find
        <em class="word">cygwin1.dll</em> installed and report that Cygwin root is <em class="word">E:/</em>
        This means that <samp class="word">tinypath-:extra-path-root</samp> will get set for
        you when package loads. Suppose further that you have set
        variable <samp class="word">tinypath-:load-path-root</samp> to point out suitable
        locations in <em class="word">E:/usr/share/site-lisp</em>. It would seem
        that this combination means that the hierarchies would be
        traversed multiple times, since the Cygwin root already
        includes all the rest:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      E:/                             Cygwin root
      E:/usr/share/site-lisp/emacs    For this emacs...
      E:/usr/share/site-lisp/common   Emacs and XEmacs compatible tree    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        Don't worry. The Perl utility is smart enough to reduce this to
        search only <em class="word">E:/</em> and discard other roots as redundant. Hm, what if
        other lisp files are found <strong class="word">outside</strong> of the
        <em class="word">E:/usr/share/site-lisp/</em>, because it searches every dir starting
        from <em class="word">E:/</em> Say:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      E:/tmp/try/some-file.el    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        Will the directory <em class="word">E:/tmp/try/</em> reported as lisp <samp class="word">load-path</samp>
        candidate and added to search list? Yes and no. Yes, it will be
        reported, but no, it will not be added to the <samp class="word">load-path</samp> because it
        doesn't match the initial user's idea where to look for lisp files. If
        you pump up the <samp class="word">tinypath-:verbose</samp> to level 5, you can see PATH-NOK
        messages labeled &quot;candidate&quot; to indicate those rejections. Only files
        that reside under <samp class="word">tinypath-:load-path-root</samp> directories are counted
        in.



  <a name="updating_running_emacs" id="updating_running_emacs"></a>
  <h2>
      Updating running Emacs
      
  </h2>




<p>
<p class="column8">
        Suppose you have downloaded the latest versions of packages X, Y and Z
        and you want your current emacs's paths updated, call this function:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      M-x tinypath-cache-regenerate    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        Take a bit of skepticism: It is a fortunate event if it all
        worked that easily. You see, you already have several packages
        loaded in your Emacs and they are using the &quot;old&quot; code. Now
        you wiped the old directories away and told Emacs to look for
        only &quot;new&quot; directories.  After a while you may run into
        bizarre dependency problems. I recommend that after any major
        package update, which contains <strong class="word">several</strong> of files (like Gnus),
        you:

<ul>
	<li> Install package and regenerate cache in current Emacs session
             with <samp class="word">M-x</samp> <samp class="word">tinypach-cache-regenerate</samp>.
<li> Save your current Emacs buffers (see <em class="word">desktop.el</em>, <em class="word">tinydesk.el</em>)
	<li> Quit, restart Emacs and restore your working desktop.</li>
</ul>





  <a name="compressed_lisp_file_support" id="compressed_lisp_file_support"></a>
  <h2>
      Compressed lisp file support
      
  </h2>




<p>
<p class="column8">
        In order to use the full compression support for autoload functions
        as well, set variable <samp class="word">tinypath-:compression-support</samp> to symbol
        <samp class="word">all</samp>. the default support only handles <samp class="word">require</samp> and <samp class="word">load</samp> commands.
        the variable must be set before rhis utility package is loaded.


<p class="column7"><em><strong>
       Jka-compr and this package</strong></em>



<p class="column8">
        jka-compr has native support to un/compress any file that have
        specific extensions. The handling is done via
        <samp class="word">file-name-handler-alist</samp> and commands like these will load
        properly including any autoloads.

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      (load &quot;my-el.gz&quot;)    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        The obvious problem is that you have to manually go and change all
        you load commands so that they end in .gz so that jka-compr takes
        care of loading. What if you later uncompress the file? You have to
        go and update all the load commands in you Emacs startup files.
        This isn't very nice, since you should be able to un/compress elisp
        files whenever you wish and still have permanent statement like one
        below. Basically this is what the compression support here is all
        about; you don't have to worry if the file is compressed or not
        when these advised functions are in effect. The following statement
        will always work:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      (load &quot;my-el&quot;)    </PRE></TD>
    </TR>
</TABLE>


<p class="column7"><em><strong>
       How the compressed loading works</strong></em>


<ul>
	<li>When user request <samp class="word">load</samp> FILE, try to find some compressed file
            that JKA knows about by adding extensions &quot;.gz&quot; and &quot;.Z&quot; and
            whatever user has configured JKA to handle. <strong class="word">LIMITATION:</strong>
            only .gz .bz2 and the like that compress one file at a time
            is currently supported. Don't try using .zip or similar.
<li>If the FILE is absolute path, then look from that
            directory only.
	</li>
<li>If no directory is given, find the file along the path.
	</li>
<li>If there was somewhere a compressed file, just load it (because JKA
            will transparently uncompress it), eval it, and kill the buffer.
	</li>
<li>If NO COMPRESSED file was found, just follow normal
	            emacs rules.</li>
</ul>




<p class="column7"><em><strong>
       Note: Why you should not prefer compressed .elc files</strong></em>



<p class="column8">
        The purpose of compression support is to make it possible to
        have more useful lisp files in an account that has a limited
        disk space (quota). Many Unicersity student accounts have this
        limitation. Keeping lisp files in compressed format
        saves quite a much disk space.

<ul>
	<li>Plain text, lisp <samp class="word">.el</samp>, files may compress better.
<li>The documentation in comments is important, e.g all the
            instruction to use the file are there. Byte compiling
            strips away documentation.
	</li>
<li>In order to debug or send bug reports you have to use .el files,
            the .elc files are useless.
	</li>
<li>The performance ratio that the .elc files offer may not
	            be a crucial factor (many times you couldn't tell).</li>
</ul>




<p class="column7"><em><strong>
       Note: advised emacs commands</strong></em>



<p class="column8">
        The adviced functions can be further adviced, but
        if the redefined function uses <samp class="word">interactive-p</samp> test, it will
        not indicate user call (like M-x load-library). The reason why
        the advised functions detect it, is that advice.el's
        <samp class="word">ad-do-it</samp> macro cannot pass the interactive flag information
        to the original functions.



  <a name="trouble_shooting" id="trouble_shooting"></a>
  <h2>
      Trouble shooting
      
  </h2>




<p>
<p class="column8">
        There is no denying it, this package is dangerous. When something
        goes wrong, it really goes wrong and your Emacs may be messed up
        completely. So, here are some trouble shooting tips, that you
        might want to try to rescue the situation or understand what is
        going on. The most usual blame is the <em class="word">cache</em> content which does not
        contain the correct or up to date information.


<p class="column7"><em><strong>
       Package is not found or loaded?</strong></em>



<p class="column8">
        Please confirm that the file location is known and is in right
        directory by calling <samp class="word">M-x</samp> <samp class="word">locate-library</samp>. If the result is
        not correct, please check <samp class="word">tinypath-:load-path-root</samp> and
        <samp class="word">tinypath-:extra-path-root</samp>. Try to remedy the situation,
        regenerate cache with <samp class="word">M-x</samp> <samp class="word">tinypath-cache-regenerate</samp>.


<p class="column7"><em><strong>
       You don't know what particular package is causing troubles</strong></em>



<p class="column8">
        Go to the <em class="word">Message</em> buffer and clear it (<samp class="word">C-x</samp> <samp class="word">h</samp> followed by
        <samp class="word">C-w</samp>). Run the path generation engine with debug <samp class="word">M-x</samp>
        <samp class="word">tinypath-debug-external-helper</samp> and study the output. It may
        be ignoring some files that you think should be included. Please
        check content of <samp class="word">tinypath-:load-path-ignore-regexp</samp> and
        <samp class="word">tinypath-:load-path-ignore-regexp-extra</samp>.


<p class="column7"><em><strong>
       You need to see the internals</strong></em>



<p class="column8">
        Call function <samp class="word">tinypath-cache-file-find-file</samp> to display the current
        cache and use <samp class="word">C-s</samp> and <samp class="word">C-r</samp> to search entries in the file. Remember
        that you must not modify this file, because any changes you do, will
        get overwritten next time the cache is regenerated. The problem is
        somewhere else if you can see incorrect settings in the cache file.



  <a name="code_note_general" id="code_note_general"></a>
  <h2>
      Code note: General
      
  </h2>




<p>
<p class="column8">
        Because this package is among the first that is loaded from Emacs
        startup file, It contains copies of some functions from TinyLib;
       libraries, to make the package independent until the point where
        the <samp class="word">load-path</samp> has been set up and other libraries are available.
        In the code you may find marks &quot;#copy:&quot; which indicate code that
        has been copied/simplified to be used here. Autoloads statements in
        this package defer loading functions until the end is reached and
        <samp class="word">load-path</samp> is determined and the rest of the functions can be
        loaded from the libraries.



  <a name="code_note_where_is_that_emacs_package" id="code_note_where_is_that_emacs_package"></a>
  <h2>
      Code note: Where is that emacs package
      
  </h2>




<p>
<p class="column8">
        If you ever need to know the location of a package that Emacs
        would load or has loaded, while this utility is in effect,
        use this call:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      (insert (tinypath-cache-p &quot;gnus.el&quot;))    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        In fact the regular call yields same result, because
        <samp class="word">locate-library</samp> is adviced:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      (insert (locate-library &quot;gnus.el&quot;))    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        More easily, with <em class="word">tinylisp.el</em>, which takes advantage of
        tinypath.el cache, you can load any emacs package for editing
        with command:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      M-x load-library RET tinylisp RET
      M-x tinylisp-library-find-file
      (tinypath cache)Lisp Library: gnus.el RET    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        Alternatively there is mode hot-keys $ l f  and $ l p :

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      M-x load-library RET tinylisp RET
      M-x tinylisp-install
      M-x tinylisp-mode  (in *scratch* buffer, see &quot;E&quot; in modeline)
      $ l f
      (tinypath cache)Lisp Library: gnus.el RET    </PRE></TD>
    </TR>
</TABLE>



  <a name="code_note_internal_optimizations" id="code_note_internal_optimizations"></a>
  <h2>
      Code note: Internal optimizations
      
  </h2>




<p>
<p class="column8">
        In the installation section it is instructed that the location of the
        package is pushed into the <samp class="word">load-path</samp> before the package is loaded:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      (require 'cl)
      (pushnew &quot;~/elisp/tiny/lisp&quot; load-path :test 'stringp=)
      (load &quot;tinypath.el&quot;)    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        Please follow this instruction. The reason is that program tries to
        use most efficient code to boot everything up and the first thing
        it can do is to check the location where it has been saved. This
        package will use this information to assume that the Perl program
        is available at <em class="word">~/some/path/bin/emacs-util.pl</em>. If that fails, the
        Perl program is searched along <samp class="word">exec-path</samp>. This is usually
        desirable, situation because every new installation includes newer
        version of Perl program and the one at <samp class="word">exec-path</samp> may not be up
        to date. The perl code will speed up booting compared to pure Emacs
        Lisp implementation. In addition the Perl code section in this file
        (often referred as &quot;external&quot;) has extra features included.



  <a name="code_note_messages" id="code_note_messages"></a>
  <h2>
      Code note: *Messages*
      
  </h2>




<p>
<p class="column8">
        This package will print loads of messages to Emacs &quot;*Message*&quot; or
        XEmacs &quot; <em class="word">Message-Log</em>&quot; buffer. This is a design decisions so that
        execution can be easily traced during Emacs load time. It also help
        reporting errors. The default <samp class="word">tinypath-:verbose</samp> 3 will log the most
        important messages.  Even if you set the level to 0 or nil, still
        some messages are displayed. Have a look at Message buffer if you have
        not much used it before. You may find interesting information to
        debug some of your own mis-configurations, like stale directories
        in <samp class="word">exec-path</samp>.



  <a name="code_note_custom" id="code_note_custom"></a>
  <h2>
      Code note: Custom
      
  </h2>




<p>
<p class="column8">
        If you have Emacs that does not contain <em class="word">custom.elc</em> (Yes, it must be
        in compiled format, be sure to check), you can download Noah
        Friedman's excellent custom emulation package <em class="word">cust-stub.el</em> at
        <a href="http://www.splode.com/~friedman/software/emacs-lisp/" >http://www.splode.com/~friedman/software/emacs-lisp/</A> You have to load
        it from absolute location before loading this packages like this:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      (load &quot;~/elisp/noah/cust-stub&quot;)
      (load &quot;tinypath&quot;)    </PRE></TD>
    </TR>
</TABLE>



  <a name="code_note_insinuating_packages" id="code_note_insinuating_packages"></a>
  <h2>
      Code note: Insinuating packages
      
  </h2>




<p>
<p class="column8">
        Some packages can be auto-configured when the perl script reads the
        contents of the directories. Like package <em class="word">woman.el</em> which
        needs to know the location of man path directories. For other
        packages there are different &quot;installations&quot;. Gnus is one
        interesting example: Every Emacs and XEmacs release comes with
        Gnus version, which is usually outdated and many install Gnus
        privately. The problem is multiple Gnus versions in the load
        paths and the wished situation is that there would be only the
        latest. there is experimental code to find out which of the
        Gnus packages along <samp class="word">load-path</samp> is the latest and after making
        hopefully right decision (according to gnus-version-*
        variable) the other Gnus locations are hidden by modifying
        <samp class="word">load-path</samp> and <samp class="word">tinypath-:load-path-ignore-regexp</samp>. This is a
        complimentary method
        to that suggested in the manual section &quot;3rd party packages&quot;.



  <a name="code_note_elp_profiling_results" id="code_note_elp_profiling_results"></a>
  <h2>
      Code note: Elp profiling results
      
  </h2>




<p>
<p class="column8">
        The profiling results were run using method below. It must be note,
        that the <samp class="word">tinypath-external-*</samp> is the time when the external perl
        program examines all the directories, so EXT time is not significant
        because it varies from system to system. The
        <samp class="word">tinypath-external-setup-parse-data</samp> is the actual time spent in
        parsing the returned data. The functions that are called most of the
        time are the ones that must be kept on eye on and they seem to
        perform very well. Immediate below are the most important functions
        that perform the Parsing after the perl has returned results (these
        are not from the total listing, but after tweaking). The listing
        below represents timing results somewhere around 2001:

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      tinypath-external-output-parse                   1    4.89  4.89
        tinypath-external-output-parse-1               5    1.09  0.21
        tinypath-external-output-parse-1-cache         1    3.79  3.79


      tinypath-external-setup-parse-data               1    5.77  5.77
        tinypath-external-setup-1-load-path            249  0.70  0.002
        tinypath-external-setup-1-man-path             44   0.0   0.0
        tinypath-exec-path-append                      73   0.92  0.012
        tinypath-info-handler                          31   8.46  0.27
        tinypath-external-setup-cache                  1    0.0   0.0    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        These timing results was taken 2003-05-18 running Cygwin
        XEmacs 21.4.10, Pentium 400 Mhz. These profiling results are
        from the initial boot phase, before cache is loaded. It's
        pretty fast.

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      (setq tinypath-:install-flag nil)
      (load &quot;elp&quot;
      (load &quot;tinypath&quot;)
      (elp-instrument-package &quot;tinypath-&quot;)

      ;; Now run the boot phase ONLY
      (tinypath-load-path-initial-value
        tinypath-:core-emacs-load-path-list)

      Function Name                                   Count Elap   Ave
      =============================================== ===== =====  ===
      tinypath-load-path-initial-value                1     0.477  0.47
      tinypath-load-path-add-subdirs                  1     0.463  0.46
      tinypath-directory-subdirs                      1     0.451  0.45
      tinypath-emacs-root-directory                   1     0.008  0.00
      tinypath-emacs-root-by-load-path                1     0.008  0.00
      tinypath-emacs-core-path-p                      119   0.004  3.36
      tinypath-expand-file-name                       5     0.001  0.00
      tinypath-load-path-initial-value-xemacs         1     0.001  0.00
      tinypath-load-path-string-match                 1     0.001  0.00
      tinypath-win32-p                                5     0.0    0.0
      tinypath-emacs-versions                         1     0.0    0.0    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        Theses timing results was taken 2003-05-18 running Cygwin
        XEmacs 21.4.10, Pentium 400 Mhz. The cache with 4500
        directories was loaded from configuration file. In this case
        <samp class="word">tinypath-:cache-file-postfix</samp> value was '.el'. The timing
        information was tested and generated with:

<ul>
	<li><samp class="word">C-x</samp> <samp class="word">C-f</samp> tinypath.el RET  &ndash; toad read tinypath.el to Emacs
<li><samp class="word">M-x</samp> <samp class="word">load-library</samp> RET tinylisp.el RET
	</li>
<li><samp class="word">M-x</samp> <samp class="word">turn-on-tinylisp-mode</samp> RET
	</li>
<li>$ -    to eval current buffer
	</li>
<li>$ e I  to instrument everything (Wtih empty value, scan buffer)
	</li>
<li><samp class="word">M-x</samp> <samp class="word">tinypath-cache-regenerate</samp> RET
	<li>$ e s  to show results</li>
</ul>




<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      Function Name                                   Count Elap   Ave
      =============================================== ===== =====  ===
      tinypath-install                                1     6.812  6.81
      tinypath-cache-setup                            1     5.76   5.76
      tinypath-setup                                  1     5.76   5.76
      tinypath-directory-list-clean                   7     3.756  0.53
      tinypath-cache-file-load                        1     2.552  2.55
      tinypath-load-path-clean                        1     2.272  2.27
      tinypath-cache-file-need-sync-p                 1     1.932  1.93
      tinypath-load-path-not-in-synch-p               1     1.932  1.93
      tinypath-exec-path-clean                        2     0.679  0.34
      tinypath-exec-path-check-verbose                2     0.597  0.298
      tinypath-exec-path-check                        2     0.594  0.297
      tinypath-load-path-merge                        1     0.364  0.364
      tinypath-Info-default-directory-list-clean      1     0.218  0.218
      tinypath-file-remove-trailing-slash             825   0.121  0.000
      tinypath-cache-mode                             1     0.082  0.082
      turn-on-tinypath-cache-mode                     1     0.082  0.082
      turn-on-tinypath-cache-mode-maybe               1     0.082  0.082
      tinypath-ti::advice-control                     1     0.081  0.081
      tinypath-install-timer                          1     0.007  0.007
      tinypath-cache-file-name                        2     0.006  0.003
      tinypath-exec-path-from-path                    2     0.006  0.003
      tinypath-ti::compat-timer-cancel-function       1     0.005  0.005
      tinypath-ti::compat-timer-elt                   2     0.004  0.002
      tinypath-cache-warn-if-not-exist                1     0.004  0.004
      tinypath-cache-file-old-p                       1     0.004  0.004
      tinypath-days-old                               1     0.002  0.002
      tinypath-cache-status-string                    2     0.002  0.001
      tinypath-cache-status-message                   1     0.002  0.002
      tinypath-advice-instantiate                     1     0.002  0.002
      tinypath-expand-file-name                       3     0.001  0.000
      tinypath-ti::compat-timer-cancel                1     0.001  0.001
      tinypath-use-compression-maybe                  2     0.001  0.0005
      tinypath-exec-path-append                       1     0.001  0.001
      tinypath-win32-p                                6     0.0    0.0
      tinypath-emacs-versions                         2     0.0    0.0
      tinypath-ti::date-time-difference               1     0.0    0.0
      tinypath-eval-after-load                        1     0.0    0.0
      tinypath-time-string                            2     0.0    0.0
      tinypath-file-compressed-p                      2     0.0    0.0
      tinypath-emacs-lisp-file-list-cache-clear       1     0.0    0.0
      tinypath-autoload-file-name                     1     0.0    0.0
      tinypath-autoload-require                       1     0.0    0.0
      tinypath-cache-p                                1     0.0    0.0
      tinypath-cache-file-hostname                    2     0.0    0.0
      tinypath-load-path-root-changed-p               1     0.0    0.0    </PRE></TD>
    </TR>
</TABLE>


<p class="column8">
        Same timing test as above, but now using compiled cache file at
        Emacs startup. In this case <samp class="word">tinypath-:cache-file-postfix</samp> value was
        '.elc'. The speedup is 50%, rducing the load time to mere 3-4
        seconds. Notice the dramatic change in <samp class="word">tinypath-cache-file-load</samp>:
        0.5 seconds vs. 2.5 seconds non-compiled.

<P>
<TABLE class="shade-normal">
    <TR>
    <TD class="shade-normal-attrib" valign="top">
    <PRE>
      Function Name                                   Count Elap   Ave
      =============================================== ===== =====  ===
      tinypath-install                                1     3.305  3.30
      tinypath-cache-setup                            1     2.017  2.01
      tinypath-setup                                  1     2.017  2.01
      tinypath-directory-list-clean                   7     1.608  0.22
      tinypath-load-path-clean                        1     0.904  0.90
      tinypath-advice-instantiate                     1     0.784  0.78
      tinypath-cache-file-load                        1     0.549  0.54
      tinypath-exec-path-check                        2     0.506  0.25
      tinypath-exec-path-check-verbose                2     0.506  0.25
      tinypath-load-path-not-in-synch-p               1     0.368  0.36
      tinypath-cache-file-need-sync-p                 1     0.368  0.36
      tinypath-exec-path-clean                        2     0.326  0.16
      tinypath-exec-path-from-path                    2     0.154  0.07    </PRE></TD>
    </TR>
</TABLE>



  <a name="todo" id="todo"></a>
  <h2>
      Todo
      
  </h2>



<p>
<ul>
	<li>In theory it is possible to load remote files with ange-ftp/EFS in
            manner of <samp class="word">load-library</samp> RET /user@host:/path/to/file but this
            has never been tested.
<li>It theory it is possible to add /user@host:/path/to/dir/
	            to <samp class="word">load-path</samp>, but that has never been tested.</li>
</ul>






<!--    ......................................................................
    DOCUMENT END BLOCK
    ......................................................................
-->

<hr>
<em    class="footer">
<p>
Copyright &copy; 2007 by Jari Aalto. This material may be
distributed subject to the terms and conditions set forth
in the Creative commons Attribution-ShareAlike License.
See http://creativecommons.org/
<p>
This file has been automatically generated from plain text file
with Perl script <strong>t2html.pl v2007.0526</strong><br>
Document author: Jari Aalto<br>
Url: <a href="http://tiny-tools.sourceforge.net">http://tiny-tools.sourceforge.net</a><br>
Last updated: 2007-09-09 12:03<br>
</em    class="footer">
</body>
</html>
